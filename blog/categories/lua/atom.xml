<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: lua | /home/andreas]]></title>
  <link href="http://aprell.github.io/blog/categories/lua/atom.xml" rel="self"/>
  <link href="http://aprell.github.io/"/>
  <updated>2014-12-21T19:09:01+01:00</updated>
  <id>http://aprell.github.io/</id>
  <author>
    <name><![CDATA[Andreas Prell]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Lua Gotchas]]></title>
    <link href="http://aprell.github.io/blog/2014/12/21/lua-gotchas/"/>
    <updated>2014-12-21T18:26:15+01:00</updated>
    <id>http://aprell.github.io/blog/2014/12/21/lua-gotchas</id>
    <content type="html"><![CDATA[<p>Lua is one of my favorite programming languages. Lua is easy to learn, but not
entirely without <a href="http://www.luafaq.org/gotchas.html">gotchas</a> if you&rsquo;re used to other languages. One gotcha is
related to for-loops. What do you think the following piece of code will
print?</p>

<!--more-->


<pre><code class="lua">for i = 1, 5 do
    print(i)
    if i == 3 then i = i + 1 end
end
</code></pre>

<p>The numbers from one to five except four? Because that&rsquo;s what the equivalent
loop in C++ would print:</p>

<pre><code class="c++">for (int i = 1; i &lt;= 5; i++) {
    std::cout &lt;&lt; i &lt;&lt; std::endl;
    if (i == 3) i++;
}
</code></pre>

<p>Except it&rsquo;s not equivalent. Lua&rsquo;s for-loops are implemented in terms of while.
Above example is translated to:</p>

<pre><code class="lua">do
    local _i, _end, _step = 1, 5, 1
    while _i &lt;= _end do
        local i = _i
        print(i)
        if i == 3 then i = i + 1 end
        _i = _i + _step
    end
end
</code></pre>

<p>Quoting from <a href="http://www.lua.org/pil/4.3.4.html">Programming in Lua</a>:</p>

<blockquote>The for loop has some subtleties that you should learn in order to
make good use of it. First, all three expressions are evaluated once, before
the loop starts. [&#8230;] Second, the control variable is a local variable
automatically declared by the for statement and is visible only inside the
loop. [&#8230;] Third, you should never change the value of the control
variable.</blockquote>




<!--References-->



]]></content>
  </entry>
  
</feed>
